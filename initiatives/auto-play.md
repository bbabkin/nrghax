    │ Overview                                                                                                                                                                                                                                                        │
     │                                                                                                                                                                                                                                                                 │
     │ I'll implement a dedicated routine player mode with auto-play functionality similar to Udemy's course player. When users click "Play" on a routine, they'll enter an immersive player interface where hacks (especially video content) auto-advance seamlessly. │
     │                                                                                                                                                                                                                                                                 │
     │ 1. Database Schema Updates                                                                                                                                                                                                                                      │
     │                                                                                                                                                                                                                                                                 │
     │ - Add to user_routines table:                                                                                                                                                                                                                                   │
     │   - current_hack_position INT DEFAULT 0 - Track which hack user is currently on                                                                                                                                                                                 │
     │   - last_played_at TIMESTAMPTZ - Track when user last accessed the routine                                                                                                                                                                                      │
     │                                                                                                                                                                                                                                                                 │
     │ 2. New Components to Create                                                                                                                                                                                                                                     │
     │                                                                                                                                                                                                                                                                 │
     │ A. RoutinePlayer Component (/components/routines/RoutinePlayer.tsx)                                                                                                                                                                                             │
     │                                                                                                                                                                                                                                                                 │
     │ - Full-screen player interface with sidebar navigation                                                                                                                                                                                                          │
     │ - Auto-play logic for transitioning between hacks                                                                                                                                                                                                               │
     │ - Progress tracking and automatic position saving                                                                                                                                                                                                               │
     │ - Support for:                                                                                                                                                                                                                                                  │
     │   - YouTube videos (with onEnd event detection)                                                                                                                                                                                                                 │
     │   - Self-hosted videos                                                                                                                                                                                                                                          │
     │   - Text content (with manual advance)                                                                                                                                                                                                                    │
     │   - External links (with manual advance)                                                                                                                                                                                                                        │
     │                                                                                                                                                                                                                                                                 │
     │ B. VideoPlayer Component (/components/ui/VideoPlayer.tsx)                                                                                                                                                                                                       │
     │                                                                                                                                                                                                                                                                 │
     │ - Enhanced video player with auto-play callbacks                                                                                                                                                                                                                │
     │ - YouTube API integration for detecting video end                                                                                                                                                                                                               │
     │ - Self-hosted video support with HTML5 events                                                                                                                                                                                                                   │
     │ - Loading states and buffering indicators                                                                                                                                                                                                                       │
     │                                                                                                                                                                                                                                                                 │
     │ 3. New Route: /routines/[slug]/play                                                                                                                                                                                                                             │
     │                                                                                                                                                                                                                                                                 │
     │ - Server-side data fetching for routine and hacks                                                                                                                                                                                                               │
     │ - Client component for interactive player                                                                                                                                                                                                                       │
     │ - Automatic progress saving to database                                                                                                                                                                                                                         │
     │ - Resume from last position functionality                                                                                                                                                                                                                       │
     │                                                                                                                                                                                                                                                                 │
     │ 4. Key Features                                                                                                                                                                                                                                                 │
     │                                                                                                                                                                                                                                                                 │
     │ Auto-Play Logic:                                                                                                                                                                                                                                                │
     │                                                                                                                                                                                                                                                                 │
     │ 1. YouTube Videos: Use YouTube IFrame API to detect when video ends                                                                                                                                                                                             │
     │ 2. Self-Hosted Videos: Use HTML5 video 'ended' event                                                                                                                                                                                                            │
     │ 3. Text Content: Either timer-based (configurable) or manual "Next" button                                                                                                                                                                                      │
     │ 4. External Links: Manual advance only                                                                                                                                                                                                                          │
     │                                                                                                                                                                                                                                                                 │
     │ User Controls:                                                                                                                                                                                                                                                  │
     │                                                                                                                                                                                                                                                                 │
     │ - Play/Pause for current hack                                                                                                                                                                                                                                   │
     │ - Next/Previous navigation                                                                                                                                                                                                                                      │
     │ - Sidebar with all hacks (shows completed/current/upcoming)                                                                                                                                                                                                     │
     │ - Auto-play toggle (user preference)                                                                                                                                                                                                                            │
     │ - Playback speed control for videos                                                                                                                                                                                                                             │
     │ - Mark as complete button                                                                                                                                                                                                                                       │
     │                                                                                                                                                                                                                                                                 │
     │ Progress Tracking:                                                                                                                                                                                                                                              │
     │                                                                                                                                                                                                                                                                 │
     │ - Real-time progress updates to database                                                                                                                                                                                                                        │
     │ - Visual progress bar showing routine completion                                                                                                                                                                                                                │
     │ - Individual hack completion tracking                                                                                                                                                                                                                           │
     │ - Resume from where user left off                                                                                                                                                                                                                               │
     │                                                                                                                                                                                                                                                                 │
     │ 5. UI/UX Design                                                                                                                                                                                                                                                 │
     │                                                                                                                                                                                                                                                                 │
     │ - Layout: Split screen with video/content on left, hack list on right                                                                                                                                                                                           │
     │ - Mobile: Full-screen player with collapsible hack list                                                                                                                                                                                                         │
     │ - Visual Indicators:                                                                                                                                                                                                                                            │
     │   - Current hack highlighted                                                                                                                                                                                                                                    │
     │   - Completed hacks with checkmarks                                                                                                                                                                                                                             │
     │   - Progress bar for routine completion                                                                                                                                                                                                                         │
     │   - "Up Next" preview for next hack                                                                                                                                                                                                                             │
     │                                                                                                                                                                                                                                                                 │
     │ 6. Implementation Steps                                                                                                                                                                                                                                         │
     │                                                                                                                                                                                                                                                                 │
     │ 1. Database Migration: Add new columns for tracking position                                                                                                                                                                                                    │
     │ 2. Create VideoPlayer component with YouTube API integration                                                                                                                                                                                                    │
     │ 3. Build RoutinePlayer component with auto-play logic                                                                                                                                                                                                           │
     │ 4. Create /routines/[slug]/play route                                                                                                                                                                                                                           │
     │ 5. Add server actions for progress tracking                                                                                                                                                                                                                     │
     │ 6. Update routine page with "Play" button linking to player                                                                                                                                                                                                     │
     │ 7. Add user preferences for auto-play settings                                                                                                                                                                                                                  │
     │ 8. Implement mobile-responsive design                                                                                                                                                                                                                           │
     │ 9. Add keyboard shortcuts (space for play/pause, arrow keys for navigation)                                                                                                                                                                                     │
     │                                                                                                                                                                                                                                                                 │
     │ 7. Technical Considerations                                                                                                                                                                                                                                     │
     │                                                                                                                                                                                                                                                                 │
     │ - YouTube API: Load YouTube IFrame API script dynamically                                                                                                                                                                                                       │
     │ - Performance: Preload next video while current one is playing                                                                                                                                                                                                  │
     │ - State Management: Use React state for player controls, database for persistence                                                                                                                                                                               │
     │ - Error Handling: Gracefully handle failed video loads, network issues                                                                                                                                                                                          │
     │ - Accessibility: Keyboard navigation, screen reader support                                                                                                                                                                                                     │
     │                                                                                                                                                                                                                                                                 │
     │ 8. Nice-to-Have Features (Future)                                                                                                                                                                                                                               │
     │                                                                                                                                                                                                                                                                 │
     │ - Picture-in-picture mode                                                                                                                                                                                                                                       │
     │ - Note-taking alongside videos                                                                                                                                                                                                                                  │
     │ - Bookmarks within videos                                                                                                                                                                                                                                       │
     │ - Variable playback speed memory                                                                                                                                                                                                                                │
     │ - Offline download capability (for self-hosted content)                                                                                                                                                                                                         │
     │                                                                                                                                                                                                                                                                 │
     │ This implementation will create a seamless, distraction-free learning experience where users can focus on the exercise routine without manual navigation between hacks.            